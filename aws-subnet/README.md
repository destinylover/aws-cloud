## 서브넷 생성을 통한 IP 블록 주소 대역 구분

VPC를 생성한 이후에는 내부 네트워크를 논리적으로 나누기 위해 서브넷을 설정하게 된다.  
서브넷은 전체 IP 대역을 작은 단위로 나눠 네트워크를 효율적으로 운영할 수 있게 해준다.

---

### 서브넷 생성 시 고려할 2가지 기준

1. 외부 접속 허용 여부에 따라 **공개(public)** 영역과 **보안(private)** 영역으로 구분
2. 서버 이중화를 위해 **Main** 영역과 **Slave** 영역을 가용영역 단위로 구분

---

### 서브넷이란?

- 서브넷은 네트워크 내부에서 **IP 주소 범위를 분할**해 내부 네트워크를 나누는 단위다.
- 라우팅 시 전체 네트워크가 아닌, 특정 서브넷만 스캔하도록 할 수 있어 **비용과 성능 면에서 유리**하다.
- 서브넷을 만들 때는 반드시 **가용영역(Availability Zone)** 을 지정해야 한다.

> 참고: 가용영역(AZ)은 하나의 리전 안에 존재하며, 보통 여러 개의 독립된 데이터 센터로 구성된다.

---

### IP 주소 대역 구성 방식 (CIDR 기반 서브넷 분할)

서브넷을 나눌 때는 **CIDR(Classless Inter-Domain Routing)** 방식으로 IP 대역을 분할한다.  
IPv4 주소는 32비트로 구성되어 있고, 이 중 일부는 **고정 네트워크 비트**, 일부는 **서브넷**, 나머지는 **리소스**로 나눈다.


32비트 = 고정 비트 수 + 서브넷 비트 수 + 리소스 비트 수


#### 예시: 10.0.0.0/16 IP 블록 기준

1. 서브넷 8비트 + 리소스 8비트  
   → 서브넷 256개, 리소스 256개 생성 가능

2. 서브넷 4비트 + 리소스 12비트  
   → 서브넷 16개, 리소스 4096개  
   → **실무에서 가장 많이 쓰이는 구조**

3. 서브넷 2비트 + 리소스 14비트  
   → 서브넷 4개, 리소스 16,384개 생성 가능

> ⚠실제로는 각 서브넷마다 AWS가 예약하는 주소가 있어서 5개를 빼야 함  
> → 실질적인 리소스 수 = 이론 수 - 5

---

## [실습] 이중화와 외부 접속 제어를 위한 4개의 서브넷 생성

이번 실습에서는 다음 기준을 바탕으로 서브넷을 분할했다.

- **서브넷 4비트, 리소스 12비트** 구조 선택
- **2개의 가용영역(AZ)** 에 각각 공개(public)와 보안(private) 서브넷 배치

---

### 서브넷 네이밍 컨벤션

AWS 리소스가 많아질수록 구분하기 쉽도록 네이밍 규칙을 정하는 것이 중요하다.


prjName-elementType-identifier
예: myproj-subnet-public01


---

### 서브넷 구성

| 타입       | 이름         | CIDR 블록      | 가용영역 (AZ) |
|------------|--------------|----------------|----------------|
| Public     | public01     | 10.0.0.0/20    | a              |
| Public     | public02     | 10.0.16.0/20   | c              |
| Private    | private01    | 10.0.64.0/20   | a              |
| Private    | private02    | 10.0.80.0/20   | c              |

![sub1](https://github.com/user-attachments/assets/e05998ef-047a-45ee-a148-a16068555b4f)


-VPC 리소스 맵 조회

![sub2](https://github.com/user-attachments/assets/746cc82e-a569-4287-9ca3-3af75d6b37ce)


-서브넷 생성 후 구성된 VPC 내부 그림

![sub3](https://github.com/user-attachments/assets/1cd46158-a8c4-4a87-b75e-ff30d776037b)



  
이렇게 구성하면 한 리전 내 2개의 AZ에 대해 퍼블릭/프라이빗 서브넷을 각각 이중화하여 배치할 수 있고,  
향후 Auto Scaling, NAT Gateway 구성 등에도 유연하게 대응할 수 있다.





  
